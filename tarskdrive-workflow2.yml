app:
  description: "Master Workflow: Minutes, Bullets, and Tasks (Safe Import)"
  icon: ğŸ¤–
  icon_background: "#FFEAD5"
  mode: workflow
  name: TaskDrive-Master-Safe
kind: app
version: 0.1.0
workflow:
  graph:
    nodes:
      # --- 1. START NODE ---
      - id: "start"
        position: { x: 80, y: 200 }
        sourceType: start
        type: start
        title: Start
        variables:
          - label: Transcript
            name: transcript
            type: paragraph
            required: true
          - label: Processing Type
            name: processingType
            type: select
            options:
              - minutes
              - bullets
              - tasks
            required: true

      # --- 2. ROUTER NODE ---
      - id: "router"
        position: { x: 380, y: 200 }
        sourceType: if-else
        type: if-else
        title: Router
        conditions:
          - id: "cond_minutes"
            operator: equals
            variable_selector: [start, processingType]
            value: "minutes"
          - id: "cond_bullets"
            operator: equals
            variable_selector: [start, processingType]
            value: "bullets"
        default_condition_id: "default_tasks"

      # --- 3. MINUTES NODE (Model Removed for Safety) ---
      - id: "llm_minutes"
        position: { x: 680, y: 50 }
        sourceType: llm
        type: llm
        title: Generate Minutes
        # Model config removed to prevent Import Error 500
        prompt_template:
          - role: system
            text: |
              ä½ æ˜¯ä¼šè®®çºªè¦ä¸“å®¶ã€‚è¯·æ ¹æ®ä»¥ä¸‹å½•éŸ³æ–‡æœ¬ç”Ÿæˆè¯¦ç»†çš„ä¼šè®®çºªè¦ã€‚
              åŒ…å«ï¼šæ‘˜è¦ã€è¯¦ç»†è®¨è®ºç‚¹ã€å†³å®šäº‹é¡¹ã€åç»­è¡ŒåŠ¨ï¼ˆAction Itemsï¼‰ã€‚
          - role: user
            text: "{{#start.transcript#}}"

      # --- 4. BULLETS NODE (Model Removed for Safety) ---
      - id: "llm_bullets"
        position: { x: 680, y: 250 }
        sourceType: llm
        type: llm
        title: Generate Bullets
        # Model config removed to prevent Import Error 500
        prompt_template:
          - role: system
            text: |
              ä½ æ˜¯æ€»ç»“ä¸“å®¶ã€‚è¯·å°†ä¼šè®®å†…å®¹æ€»ç»“ä¸ºç®€æ´çš„è¦ç‚¹ï¼ˆBullet Pointsï¼‰ã€‚
              æ ¼å¼ï¼š
              - [å‘è¨€äºº]: [ä¸»è¦è§‚ç‚¹]
          - role: user
            text: "{{#start.transcript#}}"

      # --- 5. TASKS NODE (Model Removed for Safety) ---
      - id: "llm_tasks"
        position: { x: 680, y: 450 }
        sourceType: llm
        type: llm
        title: Generate Task List
        # Model config removed to prevent Import Error 500
        prompt_template:
          - role: system
            text: |
              è¯·åˆ†æä¼šè®®æ–‡æœ¬ï¼Œæå–æ‰€æœ‰ä»»åŠ¡ï¼Œå¹¶ä»…è¾“å‡º Markdown è¡¨æ ¼ã€‚

              | é¡¹ç•ª | é¡¹ç›® | è®®é¢˜ | è¯¾é¢˜ | ä»»åŠ¡ | è´Ÿè´£äºº | çŠ¶æ€ | æœŸé™ | 
              |---|---|---|---|---|---|---|---|

              å¦‚æœæ‰¾ä¸åˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯·ç•™ç©ºã€‚ä¸è¦è¾“å‡ºä»»ä½•è§£é‡Šæ€§æ–‡å­—ã€‚
          - role: user
            text: "{{#start.transcript#}}"

      # --- 6. END NODE ---
      - id: "end"
        position: { x: 980, y: 200 }
        sourceType: end
        type: end
        title: End
        outputs:
          - name: text
            value_selector: [sys, last_node_output]

    edges:
      - source: start
        target: router
      - source: router
        target: llm_minutes
        sourceHandle: "cond_minutes"
      - source: router
        target: llm_bullets
        sourceHandle: "cond_bullets"
      - source: router
        target: llm_tasks
        sourceHandle: "default_tasks"
      - source: llm_minutes
        target: end
      - source: llm_bullets
        target: end
      - source: llm_tasks
        target: end
