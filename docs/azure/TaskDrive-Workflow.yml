app:
  description: "Master Workflow for TaskDrive: Handles Minutes, Bullets, and Tasks generation based on input type."
  icon: ğŸ¤–
  icon_background: "#FFEAD5"
  mode: workflow
  name: TaskDrive-Master-Workflow
kind: app
version: 0.1.2
workflow:
  graph:
    nodes:
      - id: "start"
        position:
          x: 80
          y: 200
        sourceType: start
        targetType: null
        title: Start
        type: start
        variables:
          - label: Transcript
            max_length: null
            name: transcript
            options: []
            required: true
            type: paragraph
          - label: Processing Type
            max_length: null
            name: processingType
            options:
              - minutes
              - bullets
              - tasks
            required: true
            type: select

      - id: "router"
        position:
          x: 380
          y: 200
        sourceType: if-else
        targetType: null
        title: Router (If/Else)
        type: if-else
        conditions:
          - id: "cond_minutes"
            operator: equals
            variable_selector:
              - start
              - processingType
            value: "minutes"
          - id: "cond_bullets"
            operator: equals
            variable_selector:
              - start
              - processingType
            value: "bullets"
        default_condition_id: "default_tasks"

      - id: "llm_minutes"
        position:
          x: 680
          y: 50
        sourceType: llm
        targetType: null
        title: Generate Minutes
        type: llm
        model:
          mode: chat
          name: gpt-4o-mini
          provider: azure_openai
          completion_params:
            temperature: 0.5
        prompt_template:
          - role: system
            text: |
              AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã«ã‚ˆã‚‹å£æ‰“ã¡æ¡ˆã®è©³ç´°
              è­°é¡Œ3: è­°äº‹éŒ²ãƒ„ãƒ¼ãƒ«ã®ææ¡ˆã¨ãƒ‡ãƒ¢
              ãƒ„ãƒ¼ãƒ«ã®æ©Ÿèƒ½ä¸€è¦§ï¼ˆè©±è€…åˆ†é›¢ã€ã‚¿ã‚¹ã‚¯ç®¡ç†ãªã©ï¼‰
              å‚åŠ è€…ã®åå¿œã‚„å®Ÿæ–½ã®å¯å¦
              æ±ºå®šäº‹é …ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 
              æ¬¡å›ä¼šè­°ãƒ»é€£çµ¡äº‹é …: ï¼ˆæƒ…å ±ãŒãªã‘ã‚Œã°çœç•¥ï¼‰

              ä¸Šè¨˜ã®ãƒ«ãƒ¼ãƒ«ã«å‰‡ã‚Šã€æç¤ºã•ã‚ŒãŸæ–‡å­—èµ·ã“ã—ãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«ã€å…·ä½“çš„ãªäº‹ä¾‹ã‚„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’å¯èƒ½ãªç¯„å›²ã§å«ã‚ãŸè©³ç´°ãªè­°äº‹éŒ²ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚æ—¥ä»˜ã‚„å ´æ‰€ãªã©ã®æƒ…å ±ãŒä¸æ˜ã®å ´åˆã¯ã€ãã‚Œã‚‰ã®é …ç›®ã‚’å…¥ã‚Œãšã«å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
          - role: user
            text: "{{#start.transcript#}}"

      - id: "llm_bullets"
        position:
          x: 680
          y: 250
        sourceType: llm
        targetType: null
        title: Generate Bullets
        type: llm
        model:
          mode: chat
          name: gpt-4o-mini
          provider: azure_openai
          completion_params:
            temperature: 0.3
        prompt_template:
          - role: system
            text: |
              ä¼šè­°ã§äº¤ã‚ã•ã‚ŒãŸå†…å®¹ã‚’è¦ç´„ã—ã€ç®‡æ¡æ›¸ãã§åˆ†ã‹ã‚Šã‚„ã™ãã¾ã¨ã‚ã¦ãã ã•ã„ã€‚
              å¿…è¦ãªè¦ç´ ã‚’æ¥µåŠ›è½ã¨ã•ãšã«åœ§ç¸®ã—ã€å…¨ä½“ã®æµã‚ŒãŒæŠŠæ¡ã—ã‚„ã™ã„è³‡æ–™ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ãã ã•ã„ã€‚
              å‡ºåŠ›ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆä¾‹ï¼‰:
              - åŸãŒæ²ˆé»™ã®å¾Œã«è¬ç½ªã—ãŸã€‚
              - å¹³å·ãŒæ„Ÿè¬ã‚’è¿°ã¹ãŸã€‚
          - role: user
            text: "{{#start.transcript#}}"

      - id: "llm_tasks"
        position:
          x: 680
          y: 450
        sourceType: llm
        targetType: null
        title: Generate Tasks
        type: llm
        model:
          mode: chat
          name: gpt-4o-mini
          provider: azure_openai
          completion_params:
            temperature: 0.3
        prompt_template:
          - role: system
            text: |
              ä¼šè­°ã®æ–‡å­—èµ·ã“ã—ã‹ã‚‰ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆã‚¿ã‚¹ã‚¯ï¼‰ã‚’æŠ½å‡ºã—ã¦ãƒªã‚¹ãƒˆåŒ–ã—ã¦ãã ã•ã„ã€‚
              å„ã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’æ˜ç¢ºã«ã—ã¦ãã ã•ã„ï¼š
              1. ã‚¿ã‚¹ã‚¯ã®å†…å®¹
              2. æ‹…å½“è€…ï¼ˆã‚‚ã—ç‰¹å®šã§ãã‚Œã°ï¼‰
              3. æœŸé™ï¼ˆã‚‚ã—è¨€åŠã•ã‚Œã¦ã„ã‚Œã°ï¼‰
              å‡ºåŠ›å½¢å¼:Markdownãƒªã‚¹ãƒˆ
          - role: user
            text: "{{#start.transcript#}}"

      - id: "end"
        position:
          x: 980
          y: 200
        sourceType: end
        targetType: null
        title: End
        type: end
        outputs:
          - name: text
            value_selector:
              - sys
              - last_node_output

    edges:
      - source: start
        target: router
      - source: router
        target: llm_minutes
        sourceHandle: "cond_minutes"
      - source: router
        target: llm_bullets
        sourceHandle: "cond_bullets"
      - source: router
        target: llm_tasks
        sourceHandle: "default_tasks"
      - source: llm_minutes
        target: end
      - source: llm_bullets
        target: end
      - source: llm_tasks
        target: end
